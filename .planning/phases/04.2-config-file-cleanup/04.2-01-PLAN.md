---
phase: 04.2-config-file-cleanup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - config.yaml (DELETE)
  - .claude/CLAUDE.md
  - llms.txt
autonomous: true

must_haves:
  truths:
    - "config.yaml no longer exists in repository root"
    - "example.yaml exists as canonical config reference"
    - "All documentation references correct paths (no config/example.yaml)"
    - "cc-relay config init generates user config correctly"
  artifacts:
    - path: "example.yaml"
      provides: "Canonical config reference"
      contains: "server:"
    - path: ".claude/CLAUDE.md"
      provides: "Developer documentation"
      contains: "example.yaml"
    - path: "llms.txt"
      provides: "LLM-friendly project context"
      contains: "example.yaml"
  key_links:
    - from: ".claude/CLAUDE.md"
      to: "example.yaml"
      via: "reference in Configuration section"
      pattern: "See.*example\\.yaml"
    - from: "llms.txt"
      to: "example.yaml"
      via: "file structure and documentation links"
      pattern: "example\\.yaml"
---

<objective>
Remove duplicate config.yaml and fix documentation references to point to example.yaml.

Purpose: Consolidate config files - example.yaml is the canonical reference included in releases, config.yaml is a development artifact that should not exist in the repository.

Output: Clean repository with single config reference file and correct documentation paths.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Files to modify
@.claude/CLAUDE.md
@llms.txt
@example.yaml
</context>

<tasks>

<task type="auto">
  <name>Task 1: Delete config.yaml and update documentation references</name>
  <files>
    - config.yaml (DELETE)
    - .claude/CLAUDE.md
    - llms.txt
  </files>
  <action>
1. Delete the root config.yaml file:
   ```bash
   rm config.yaml
   ```

2. Update `.claude/CLAUDE.md` line 334:
   - FROM: `See \`config/example.yaml\` for full reference`
   - TO: `See \`example.yaml\` for full reference`

3. Update `llms.txt` line 79:
   - FROM: `└── config/example.yaml            # Example configuration`
   - TO: `└── example.yaml                     # Example configuration`

4. Update `llms.txt` line 145:
   - FROM: `[config/example.yaml](./config/example.yaml)`
   - TO: `[example.yaml](./example.yaml)`

Do NOT modify:
- cmd/cc-relay/main.go - defaultConfigFile constant is correct (refers to user config name)
- testdata/test-config.yaml - Test fixture, unrelated
- Any docs-site files - They correctly reference ~/.config/cc-relay/config.yaml (user location)
- PROJECT_INDEX.md/json - They correctly reference user config location
  </action>
  <verify>
```bash
# Verify config.yaml deleted
test ! -f config.yaml && echo "PASS: config.yaml deleted"

# Verify example.yaml still exists
test -f example.yaml && echo "PASS: example.yaml exists"

# Verify CLAUDE.md reference updated
grep -q 'See `example.yaml` for full reference' .claude/CLAUDE.md && echo "PASS: CLAUDE.md updated"

# Verify llms.txt file structure updated
grep -q '└── example.yaml' llms.txt && echo "PASS: llms.txt file structure updated"

# Verify llms.txt documentation link updated
grep -q '\[example.yaml\](./example.yaml)' llms.txt && echo "PASS: llms.txt link updated"

# Verify no remaining config/example.yaml references
! grep -r 'config/example.yaml' . --include='*.md' --include='*.txt' 2>/dev/null && echo "PASS: No stale config/example.yaml references"
```
  </verify>
  <done>
- config.yaml removed from repository root
- .claude/CLAUDE.md references example.yaml (not config/example.yaml)
- llms.txt references example.yaml (not config/example.yaml)
- No stale config/example.yaml paths remain in documentation
  </done>
</task>

<task type="auto">
  <name>Task 2: Verify cc-relay config init still works</name>
  <files>None (verification only)</files>
  <action>
Verify that the config init command still works correctly by:

1. Build cc-relay (if not already built):
   ```bash
   task build
   ```

2. Run config init to a temp location:
   ```bash
   ./bin/cc-relay config init --config /tmp/test-cc-relay-config.yaml
   ```

3. Verify the generated config has expected structure:
   ```bash
   grep -q 'server:' /tmp/test-cc-relay-config.yaml
   grep -q 'providers:' /tmp/test-cc-relay-config.yaml
   ```

4. Clean up:
   ```bash
   rm -f /tmp/test-cc-relay-config.yaml
   ```

This confirms that removing the root config.yaml doesn't break config generation,
which uses an embedded template (not the root file).
  </action>
  <verify>
```bash
# Build and test config init
task build 2>/dev/null || go build -o ./bin/cc-relay ./cmd/cc-relay
./bin/cc-relay config init --config /tmp/test-cc-relay-config.yaml

# Verify generated config structure
grep -q 'server:' /tmp/test-cc-relay-config.yaml && echo "PASS: Generated config has server section"
grep -q 'providers:' /tmp/test-cc-relay-config.yaml && echo "PASS: Generated config has providers section"

# Cleanup
rm -f /tmp/test-cc-relay-config.yaml
echo "PASS: Config init verification complete"
```
  </verify>
  <done>
- cc-relay builds successfully
- config init generates valid config file
- Generated config contains expected server and providers sections
  </done>
</task>

</tasks>

<verification>
All success criteria from ROADMAP.md Phase 4.2:
1. Only example.yaml exists in root as canonical reference - `test -f example.yaml && test ! -f config.yaml`
2. config.yaml removed from root - `test ! -f config.yaml`
3. All code/doc references updated appropriately - `grep` commands above
4. cc-relay config init still generates user config correctly - config init test
</verification>

<success_criteria>
- [ ] config.yaml deleted from repository root
- [ ] example.yaml unchanged and present
- [ ] .claude/CLAUDE.md references example.yaml correctly
- [ ] llms.txt references example.yaml correctly
- [ ] No stale config/example.yaml paths in documentation
- [ ] cc-relay config init works correctly
</success_criteria>

<output>
After completion, create `.planning/phases/04.2-config-file-cleanup/04.2-01-SUMMARY.md`
</output>
