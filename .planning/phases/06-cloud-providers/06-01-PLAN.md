---
phase: 06-cloud-providers
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - internal/config/config.go
  - internal/config/config_test.go
autonomous: true

must_haves:
  truths:
    - "ProviderConfig accepts aws_region field for Bedrock"
    - "ProviderConfig accepts gcp_project_id and gcp_region fields for Vertex"
    - "ProviderConfig accepts azure_resource field for Foundry"
  artifacts:
    - path: "internal/config/config.go"
      provides: "Extended ProviderConfig with cloud fields"
      contains: "AWSRegion"
    - path: "internal/config/config_test.go"
      provides: "Tests for cloud config fields"
  key_links:
    - from: "internal/config/config.go"
      to: "yaml parsing"
      via: "yaml struct tags"
      pattern: "yaml:\"aws_region\""
---

<objective>
Extend ProviderConfig with cloud-specific configuration fields for AWS Bedrock, Google Vertex AI, and Azure Foundry providers.

Purpose: Enable users to configure cloud provider settings in config.yaml with proper validation and defaults.
Output: Extended ProviderConfig struct with cloud-specific fields and helper methods.
</objective>

<execution_context>
@.claude/get-shit-done/workflows/execute-plan.md
@.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-cloud-providers/06-RESEARCH.md
@internal/config/config.go
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add cloud-specific fields to ProviderConfig</name>
  <files>internal/config/config.go</files>
  <action>
Add these fields to the ProviderConfig struct:

```go
// AWS Bedrock specific
AWSRegion  string `yaml:"aws_region"`  // e.g., "us-west-2"
AWSProfile string `yaml:"aws_profile"` // AWS config profile name (optional)

// Google Vertex AI specific
GCPProjectID string `yaml:"gcp_project_id"` // Google Cloud project ID
GCPRegion    string `yaml:"gcp_region"`     // e.g., "us-east1" or "global"

// Azure Foundry specific
AzureResource string `yaml:"azure_resource"` // Azure resource name
```

Add helper methods:
- `GetAWSRegion() string` - returns aws_region with default "us-east-1"
- `GetGCPRegion() string` - returns gcp_region with default "global"
- `IsCloudProvider() bool` - returns true if type is bedrock, vertex, or foundry
- `RequiresCloudCredentials() bool` - returns true if provider needs cloud auth (not standard API keys)

Follow existing pattern of mo.Option helpers if appropriate, but simple getters with defaults are fine for strings.
  </action>
  <verify>go build ./... compiles without errors</verify>
  <done>ProviderConfig has all 5 cloud fields (aws_region, aws_profile, gcp_project_id, gcp_region, azure_resource) with yaml tags</done>
</task>

<task type="auto">
  <name>Task 2: Add tests for cloud config fields</name>
  <files>internal/config/config_test.go</files>
  <action>
Add test cases to verify:

1. Cloud config fields parse correctly from YAML:
```go
func TestProviderConfig_CloudFields(t *testing.T) {
    yaml := `
providers:
  - name: bedrock
    type: bedrock
    enabled: true
    aws_region: us-west-2
    aws_profile: prod
  - name: vertex
    type: vertex
    enabled: true
    gcp_project_id: my-project
    gcp_region: us-east1
  - name: foundry
    type: foundry
    enabled: true
    azure_resource: my-resource
`
    // Test parsing and field values
}
```

2. Helper method defaults work correctly:
```go
func TestProviderConfig_GetAWSRegion(t *testing.T) {
    // Empty returns "us-east-1"
    // Set value returns that value
}

func TestProviderConfig_GetGCPRegion(t *testing.T) {
    // Empty returns "global"
    // Set value returns that value
}
```

3. IsCloudProvider returns correct values for each type
4. RequiresCloudCredentials returns correct values
  </action>
  <verify>go test ./internal/config/... -v passes</verify>
  <done>Tests cover cloud field parsing, default values, and helper methods</done>
</task>

</tasks>

<verification>
1. `go build ./...` - compiles without errors
2. `go test ./internal/config/... -v` - all tests pass
3. `task lint` - no linter errors
</verification>

<success_criteria>
- ProviderConfig struct has all 5 cloud-specific fields with yaml tags
- Helper methods return sensible defaults
- Test coverage for cloud config parsing and defaults
- Existing tests still pass
</success_criteria>

<output>
After completion, create `.planning/phases/06-cloud-providers/06-01-SUMMARY.md`
</output>
